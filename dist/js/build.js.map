{"version":3,"sources":["app.js","controllers.js","directives.js","filters.js","main.js","services.js"],"names":["angular","module","run","$rootScope","$state","$stateParams","config","$httpProvider","defaults","headers","post","Content-Type","transformRequest","obj","str","p","push","encodeURIComponent","join","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","$scope","hour","Date","getHours","mode","day","name","loadingPage","showLoading","$http","method","then","res","console","log","bannerList","data","banner","recommendList","recommend","renderFinish","setTimeout","Swipe","$","startSlide","speed","auto","continuous","disableScroll","stopPropagation","callback","index","elem","eq","addClass","siblings","removeClass","transitionEnd","topicList","myKeyup","e","keyCode","search","searchText","lastClick","gap","params","query","searchResult","showResult","blur","hideResult","id","topicId","topicInfo","date","mediaList","setEllipsis","each","i","divH","this","height","$p","outerHeight","text","replace","isfocus","mediaId","mediaInfo","focus","action","media_id","status","alert","message","cookieService","get","switchMode","exit","go","feedback","showFeed","sendFeed","initScroll","IScroll","scrollX","scrollY","mouseWheel","userInfo","css","medias","length","md5","username","password","login","createHash","register","test","hasCollect","articleId","article","collect","article_id","directive","restrict","template","link","scope","element","attr","on","window","history","back","$last","$eval","repeatFinish","filter","month","getMonth","getFullYear","getDate","doc","win","docEl","documentElement","resizeEvt","recalc","clientWidth","minSize","maxSize","minWidth","maxWidth","scale","fontSize","style","addEventListener","document","FastClick","attach","body","animate","position","scrollTop","scroll","bottom","factory","cookieName","cookieStart","cookie","indexOf","cookieValue","cookieEnd","decodeURIComponent","substring"],"mappings":"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","file":"build.js","sourcesContent":["angular.module('myApp', ['ui.router', 'angular-md5', 'directives', 'services', 'filters', 'RecommendModule', 'TopicModule', 'MediaModule', 'AccountModule', 'ArticleModule'])\r\n    .run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\r\n        $rootScope.$state = $state;\r\n        $rootScope.$stateParams = $stateParams;\r\n    }])\r\n    .config(['$httpProvider', function($httpProvider) {\r\n        //request payload, 转换成form data\r\n        $httpProvider.defaults.headers.post = {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n        };\r\n        $httpProvider.defaults.transformRequest = function(obj) {\r\n            var str = [];\r\n            for (var p in obj) str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\r\n            return str.join(\"&\");\r\n        };\r\n    }])\r\n    .config(['$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {\r\n        $urlRouterProvider.otherwise('/tab/recommend');\r\n\r\n        $stateProvider.state('tab', {\r\n                url: '/tab',\r\n                templateUrl: 'dist/tpl/tab.html',\r\n            })\r\n            .state('tab.recommend', {\r\n                url: '/recommend',\r\n                templateUrl: 'dist/tpl/recommend.html',\r\n                controller: 'RecommendCtrl'\r\n            })\r\n            .state('tab.topic', {\r\n                url: '/topic',\r\n                templateUrl: 'dist/tpl/topic.html',\r\n                controller: 'TopicCtrl'\r\n            })\r\n            .state('tab.media', {\r\n                url: '/media',\r\n                templateUrl: 'dist/tpl/media.html',\r\n                controller: 'MediaCtrl'\r\n            })\r\n            .state('tab.me', {\r\n                url: '/me',\r\n                templateUrl: 'dist/tpl/me.html'\r\n            })\r\n            .state('tab.me.account', {\r\n                url: '/account',\r\n                templateUrl: 'dist/tpl/account.html',\r\n                controller: 'AccountCtrl'\r\n            })\r\n            .state('tab.me.login', {\r\n                url: '/login',\r\n                templateUrl: 'dist/tpl/login.html',\r\n                controller: 'LoginCtrl'\r\n            })\r\n            .state('tab.me.register', {\r\n                url: '/register',\r\n                templateUrl: 'dist/tpl/register.html',\r\n                controller: 'RegisterCtrl'\r\n            })\r\n            .state('topicDetail', {\r\n                url: '/topic/:topicId',\r\n                templateUrl: 'dist/tpl/topicDetail.html',\r\n                controller: 'TopicDetailCtrl'\r\n            })\r\n            .state('mediaDetail', {\r\n                url: '/media/:mediaId',\r\n                templateUrl: 'dist/tpl/mediaDetail.html',\r\n                controller: 'MediaDetailCtrl'\r\n            })\r\n            .state('article', {\r\n                url: '/article/:articleId',\r\n                templateUrl: 'dist/tpl/article.html',\r\n                controller: 'ArticleCtrl'\r\n            })\r\n    }])\r\n    .controller('AppCtrl', ['$scope', function($scope) {\r\n\r\n        var hour = (new Date()).getHours();\r\n        $scope.mode = {};\r\n        if (hour > 7 && hour < 23) {\r\n            $scope.mode.day = true;\r\n            $scope.mode.name = \"日间\";\r\n        } else {\r\n            $scope.mode.day = false;\r\n            $scope.mode.name = \"夜间\";\r\n        }\r\n\r\n        $scope.loadingPage = {\r\n            'showLoading': false\r\n        };\r\n    }])","angular.module(\"RecommendModule\", [])\r\n    .controller('RecommendCtrl', ['$scope', '$http', function($scope, $http) {\r\n        $scope.loadingPage.showLoading = true;\r\n        $http({\r\n            method: 'GET',\r\n            url: '/zuiwan-backend/index.php/article/get_recommend'\r\n        }).then(function successCallback(res) {\r\n            console.log(res);\r\n            $scope.bannerList = res.data.banner;\r\n            $scope.recommendList = res.data.recommend;\r\n            $scope.loadingPage.showLoading = false;\r\n        }, function errorCallback(res) {\r\n            console.log(res);\r\n        });\r\n\r\n        $scope.renderFinish = function() {\r\n            setTimeout(function() {\r\n                new Swipe($(\".recommend #slide\")[0], {\r\n                    startSlide: 0,\r\n                    speed: 400,\r\n                    auto: 3000,\r\n                    continuous: true,\r\n                    disableScroll: false,\r\n                    stopPropagation: false,\r\n                    callback: function(index, elem) {\r\n                        var index = index > 2 ? index % 3 : index;\r\n                        $(\"#slide .dot > span\").eq(index).addClass(\"active\").siblings().removeClass(\"active\");\r\n                    },\r\n                    transitionEnd: function(index, elem) {\r\n\r\n                    }\r\n                });\r\n            }, 0);\r\n        }\r\n    }]);\r\n\r\nangular.module(\"TopicModule\", [\"ngSanitize\"])\r\n    .controller('TopicCtrl', ['$scope', '$http', function($scope, $http) {\r\n        $scope.loadingPage.showLoading = true;\r\n\r\n        $http({\r\n            method: 'GET',\r\n            url: '/zuiwan-backend/index.php/topic/get_topic',\r\n        }).then(function successCallback(res) {\r\n            console.log(res);\r\n            $scope.topicList = res.data;\r\n            $scope.loadingPage.showLoading = false;\r\n\r\n        }, function errorCallback(res) {\r\n            console.log(res);\r\n        });\r\n\r\n        $scope.myKeyup = function(e) {\r\n            if (e.keyCode == 13) {\r\n                $scope.search($scope.searchText);\r\n            }\r\n        };\r\n        var lastClick = 0;\r\n        $scope.search = function(searchText) {\r\n            if (lastClick) {\r\n                console.log(lastClick);\r\n                var gap = +(new Date()) - lastClick;\r\n                console.log(gap);\r\n                if (gap < 1000) {\r\n                    return false;\r\n                }\r\n                lastClick = +(new Date());\r\n            }\r\n\r\n            $http({\r\n                method: 'GET',\r\n                url: '/zuiwan-backend/index.php/article/search',\r\n                params: {\r\n                    query: searchText\r\n                }\r\n            }).then(function successCallback(res) {\r\n\r\n                console.log(res.data);\r\n                $scope.searchResult = res.data;\r\n                $scope.showResult = true;\r\n                $(\".search > input\").blur();\r\n            }, function errorCallback(res) {\r\n                console.log(res);\r\n            });\r\n            lastClick = +(new Date());\r\n\r\n        }\r\n        $scope.hideResult = function() {\r\n            $scope.showResult = false;\r\n            $scope.searchText = \"\";\r\n        }\r\n    }])\r\n    .controller('TopicDetailCtrl', ['$scope', '$http', '$state', function($scope, $http, $state) {\r\n        $scope.loadingPage.showLoading = true;\r\n\r\n        $http({\r\n            method: 'GET',\r\n            url: '/zuiwan-backend/index.php/topic/get_one_topic',\r\n            params: {\r\n                id: $state.params.topicId\r\n            }\r\n        }).then(function successCallback(res) {\r\n            console.log(res);\r\n            $scope.topicInfo = res.data;\r\n            $scope.date = new Date();\r\n            $scope.loadingPage.showLoading = false;\r\n\r\n        }, function errorCallback(res) {\r\n            console.log(res);\r\n        });\r\n\r\n    }]);\r\n\r\nangular.module(\"MediaModule\", [])\r\n    .controller('MediaCtrl', ['$scope', '$http', function($scope, $http) {\r\n        $scope.loadingPage.showLoading = true;\r\n\r\n        $http({\r\n            method: 'GET',\r\n            url: '/zuiwan-backend/index.php/media/get_media',\r\n        }).then(function successCallback(res) {\r\n            console.log(res.data);\r\n            $scope.mediaList = res.data;\r\n            $scope.loadingPage.showLoading = false;\r\n        }, function errorCallback(res) {\r\n            console.log(res);\r\n        });\r\n\r\n        $scope.setEllipsis = function() {\r\n            setTimeout(function() {\r\n                $(\".media .intro\").each(function(i) {\r\n                    var divH = $(this).height();\r\n                    var $p = $(\"p\", $(this)).eq(0);\r\n                    while ($p.outerHeight() > divH) {\r\n                        $p.text($p.text().replace(/(\\s)*([a-zA-Z0-9]+|\\W)(\\.\\.\\.)?$/, \"...\"));\r\n                    };\r\n                });\r\n            })\r\n        };\r\n\r\n    }])\r\n    .controller('MediaDetailCtrl', ['$scope', '$http', '$state', function($scope, $http, $state) {\r\n        $scope.isfocus = false;\r\n        $scope.loadingPage.showLoading = true;\r\n\r\n        $http({\r\n            method: 'GET',\r\n            url: '/zuiwan-backend/index.php/media/get_one_media',\r\n            params: {\r\n                id: $state.params.mediaId\r\n            }\r\n        }).then(function successCallback(res) {\r\n            console.log(res);\r\n            $scope.mediaInfo = res.data;\r\n            $scope.isfocus = !!$scope.mediaInfo['is_focus'];\r\n            $scope.loadingPage.showLoading = false;\r\n\r\n        }, function errorCallback(res) {\r\n            console.log(res);\r\n        });\r\n\r\n        $scope.focus = function() {\r\n            var action;\r\n            if ($scope.isfocus) {\r\n                action = 0;\r\n            } else {\r\n                action = 1;\r\n            }\r\n            $http({\r\n                method: 'POST',\r\n                url: '/zuiwan-backend/index.php/user/focus_media',\r\n                data: {\r\n                    media_id: $state.params.mediaId,\r\n                    action: action\r\n                }\r\n            }).then(function successCallback(res) {\r\n                if (!res.data.status) {\r\n                    alert(res.data.message);\r\n                } else {\r\n                    if (action) {\r\n                        alert(\"已成功关注！\");\r\n                        $scope.isfocus = true;\r\n                    } else {\r\n                        alert(\"已取消关注！\");\r\n                        $scope.isfocus = false;\r\n\r\n                    }\r\n                }\r\n            }, function errorCallback(res) {\r\n\r\n            });\r\n\r\n        }\r\n    }]);\r\n\r\nangular.module(\"AccountModule\", [])\r\n    .controller('AccountCtrl', ['$scope', '$http', '$state', 'cookieService', function($scope, $http, $state, cookieService) {\r\n        $scope.loadingPage.showLoading = true;\r\n        if (!cookieService.get(\"zw_username\")) {\r\n            console.log(\"go\");\r\n            $state.go(\"tab.me.login\");\r\n            $scope.loadingPage.showLoading = false;\r\n            return false;\r\n        }\r\n\r\n        $scope.switchMode = function() {\r\n            $scope.mode.day = !$scope.mode.day;\r\n            if ($scope.mode.day) {\r\n                $scope.mode.name = \"日间\";\r\n            } else {\r\n                $scope.mode.name = \"夜间\";\r\n            }\r\n\r\n        }\r\n\r\n        $scope.exit = function() {\r\n            cookieService.exit();\r\n            $state.go(\"tab.me.login\");\r\n        }\r\n\r\n        $scope.feedback = function() {\r\n            $scope.showFeed = true;\r\n        }\r\n\r\n        $scope.sendFeed = function() {\r\n            alert(\"感谢您的反馈！我们会努力做的更好！\")\r\n            $scope.showFeed = false;\r\n        }\r\n        $scope.initScroll = function() {\r\n            setTimeout(function() {\r\n                var myScroll = new IScroll('.scroll', {\r\n                    scrollX: true,\r\n                    scrollY: false,\r\n                    mouseWheel: true\r\n                });\r\n            }, 0);\r\n        }\r\n\r\n        $http({\r\n            method: 'GET',\r\n            url: '/zuiwan-backend/index.php/user/get_detail'\r\n        }).then(function successCallback(res) {\r\n            console.log(res);\r\n            $scope.userInfo = res.data;\r\n            $(\".attention-list\").css(\"width\", (9.78 * $scope.userInfo.medias.length) + \"rem\");\r\n            $scope.loadingPage.showLoading = false;\r\n        }, function errorCallback(res) {\r\n            console.log(res);\r\n        });\r\n\r\n    }])\r\n    .controller('LoginCtrl', ['$scope', '$http', '$state', 'md5', function($scope, $http, $state, md5) {\r\n        $scope.username = \"\";\r\n        $scope.password = \"\";\r\n        $scope.login = function() {\r\n            if ($scope.username == \"\" || $scope.password == \"\") {\r\n                alert(\"请填写用户名或密码！\");\r\n                return false;\r\n            }\r\n\r\n            $http({\r\n                method: 'POST',\r\n                url: '/zuiwan-backend/index.php/user/login',\r\n                data: {\r\n                    username: $scope.username,\r\n                    password: md5.createHash($scope.password)\r\n                }\r\n            }).then(function successCallback(res) {\r\n                console.log(res.data);\r\n                if (res.data.status) {\r\n                    $state.go(\"tab.me.account\");\r\n                } else {\r\n                    alert(res.data.message);\r\n                }\r\n            }, function errorCallback(res) {\r\n                console.log(res);\r\n            });\r\n        };\r\n    }])\r\n    .controller('RegisterCtrl', ['$scope', '$http', '$state', 'md5', function($scope, $http, $state, md5) {\r\n        $scope.username = \"\";\r\n        $scope.password = \"\";\r\n        $scope.register = function() {\r\n            if ($scope.username == \"\" || $scope.password == \"\") {\r\n                alert(\"请填写用户名或密码！\");\r\n                return false;\r\n            }\r\n            if (!/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/.test($scope.username)) {\r\n                alert(\"请填写正确的邮箱格式！\");\r\n                return false;\r\n            }\r\n\r\n            $http({\r\n                method: 'POST',\r\n                url: '/zuiwan-backend/index.php/user/register',\r\n                data: {\r\n                    username: $scope.username,\r\n                    password: md5.createHash($scope.password)\r\n                }\r\n            }).then(function successCallback(res) {\r\n                console.log(res.data);\r\n                if (res.data.status) {\r\n                    alert(\"注册成功\");\r\n                    $state.go(\"tab.me.account\");\r\n                } else {\r\n                    alert(res.data.message);\r\n                }\r\n            }, function errorCallback(res) {\r\n                alert(\"请求失败\");\r\n            });\r\n        };\r\n    }]);\r\n\r\nangular.module(\"ArticleModule\", [\"ngSanitize\"])\r\n    .controller('ArticleCtrl', ['$scope', '$http', '$state', 'cookieService', function($scope, $http, $state, cookieService) {\r\n\r\n        $scope.hasCollect = false;\r\n        $scope.loadingPage.showLoading = true;\r\n\r\n        $http({\r\n            method: 'GET',\r\n            url: '/zuiwan-backend/index.php/article/get_one_article',\r\n            params: {\r\n                id: $state.params.articleId\r\n            }\r\n        }).then(function successCallback(res) {\r\n            console.log(res);\r\n            $scope.article = res.data;\r\n            $scope.hasCollect = !!$scope.article['is_focus'];\r\n            $scope.loadingPage.showLoading = false;\r\n\r\n        }, function errorCallback(res) {\r\n\r\n        });\r\n\r\n        $scope.collect = function() {\r\n            if (!cookieService.get('zw_username')) {\r\n                alert(\"收藏文章请先登录！\");\r\n                return false;\r\n            }\r\n            $scope.hasCollect = !$scope.hasCollect;\r\n            var action;\r\n            if ($scope.hasCollect) {\r\n                action = 1;\r\n            } else {\r\n                action = 0;\r\n            }\r\n            $http({\r\n                method: 'POST',\r\n                url: '/zuiwan-backend/index.php/user/collect_article',\r\n                data: {\r\n                    article_id: $state.params.articleId,\r\n                    action: action\r\n                }\r\n            }).then(function successCallback(res) {\r\n                console.log(res);\r\n            }, function errorCallback(res) {\r\n\r\n            });\r\n        };\r\n\r\n    }]);","angular.module('directives', [])\r\n\r\n.directive('historyBack', function() {\r\n    return {\r\n        restrict: 'E',\r\n        template: '<div class=\"history-back\"><i class=\"icon-back\"></i></div>',\r\n        replace: true,\r\n        link: function(scope, element, attr) {\r\n            element.on('click', function() {\r\n                window.history.back();\r\n            })\r\n        }\r\n    }\r\n})\r\n\r\n.directive('repeatFinish', function() {\r\n    return {\r\n        link: function(scope, element, attr) {\r\n            if (scope.$last == true) {\r\n                scope.$eval(attr.repeatFinish)\r\n            }\r\n        }\r\n    }\r\n})","angular.module('filters', [])\r\n\r\n.filter('dateObj', function() {\r\n    return function(date) {\r\n        var date = new Date(date);\r\n        return date;\r\n    }\r\n})\r\n\r\n.filter('month', function() {\r\n    return function(date) {\r\n        var month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\r\n        return month[date.getMonth()] + ', ' + date.getFullYear();\r\n    }\r\n})\r\n\r\n.filter('day', function() {\r\n    return function(date) {\r\n        var month = ['January', 'February', 'March', 'April', 'May', 'June',\r\n            'July', 'Aguest', 'September', 'October', 'November', 'December'\r\n        ];\r\n        var day = date.getDate();\r\n        if (day < 10) {\r\n            day = '0' + day;\r\n        }\r\n        return month[date.getMonth()] + ', ' + day + ', ' + date.getFullYear();;\r\n    }\r\n})\r\n","(function(doc, win) {\r\n    var docEl = doc.documentElement,\r\n        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',\r\n        recalc = function() {\r\n            var clientWidth = docEl.clientWidth;\r\n            if (!clientWidth) {\r\n                return;\r\n            }\r\n            var minSize = 12;\r\n            var maxSize = 16;\r\n            var minWidth = 320;\r\n            var maxWidth = 768;\r\n            var scale = (clientWidth - minWidth) / (maxWidth - minWidth);\r\n            var fontSize = scale * (maxSize - minSize) + minSize;\r\n\r\n            if (fontSize > maxSize) {\r\n                fontSize = maxSize;\r\n            } else if (fontSize < minSize) {\r\n                fontSize = minSize;\r\n            }\r\n            docEl.style.fontSize = fontSize + 'px';\r\n        };\r\n\r\n    if (!doc.addEventListener) return;\r\n    win.addEventListener(resizeEvt, recalc, false);\r\n    doc.addEventListener('DOMContentLoaded', recalc, false);\r\n})(document, window);\r\n\r\n$(function() {\r\n    FastClick.attach(document.body);\r\n\r\n    var animate = false;\r\n    var position = $(window).scrollTop();\r\n    $(window).scroll(function() {\r\n        var scroll = $(window).scrollTop();\r\n        if (scroll > position && !animate && $(\"#myTab\").length) {\r\n            animate = true;\r\n            $(\"#myTab\").animate({\r\n                \"bottom\": \"-4.4rem\",\r\n            }, 300, function() {\r\n                animate = false;\r\n            });\r\n        } else if (scroll < position && !animate && $(\"#myTab\").length) {\r\n            animate = true;\r\n            $(\"#myTab\").animate({\r\n                \"bottom\": \"0\",\r\n            }, 300, function() {\r\n                animate = false;\r\n            });\r\n        }\r\n        position = scroll;\r\n    });\r\n});","angular.module('services', [])\r\n\r\n.factory('cookieService', function() {\r\n\r\n    return {\r\n        get: function(name) {\r\n            var cookieName = encodeURIComponent(name) + \"=\";\r\n            var cookieStart = document.cookie.indexOf(cookieName);\r\n            var cookieValue = \"\";\r\n\r\n            if (cookieStart > -1) {\r\n                var cookieEnd = document.cookie.indexOf(\";\", cookieStart);\r\n                if (cookieEnd == -1) {\r\n                    cookieEnd = document.cookie.length;\r\n                }\r\n                cookieValue = decodeURIComponent(document.cookie.substring(cookieStart + cookieName.length, cookieEnd));\r\n            }\r\n            return cookieValue;\r\n        },\r\n        exit: function() {\r\n            document.cookie = 'zw_username=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;';\r\n        }\r\n    };\r\n})"],"sourceRoot":"/source/"}