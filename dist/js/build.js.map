{"version":3,"sources":["app.js","controllers.js","directives.js","filters.js","main.js","services.js"],"names":["angular","module","run","$rootScope","$state","$stateParams","$on","event","to","toParams","from","fromParams","$previousState","config","$httpProvider","defaults","headers","post","Content-Type","transformRequest","obj","str","p","push","encodeURIComponent","join","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","$scope","hour","Date","getHours","mode","day","name","loadingPage","showLoading","httpService","hasGetData","page","getList","getData","then","data","bannerList","banner","recommendList","recommend","i","length","console","log","recommendCount","slideIndex","renderFinish","setTimeout","Swipe","$","startSlide","speed","auto","continuous","disableScroll","stopPropagation","callback","index","elem","$digest","transitionEnd","topicList","myKeyup","e","keyCode","search","searchText","lastClick","gap","query","searchResult","showResult","blur","hideResult","id","params","topicId","topicInfo","setEllipsis","each","divH","this","height","$p","eq","outerHeight","text","replace","mediaList","isfocus","mediaId","mediaInfo","focus","action","postData","media_id","status","alert","message","cookieService","get","userInfo","css","medias","switchMode","exit","go","feedback","showFeed","sendFeed","md5","username","password","login","createHash","register","test","$sce","hasCollect","articleId","article_content","trustAsHtml","article","collect","article_id","directive","restrict","template","link","scope","element","attr","on","previous","window","history","back","$last","$eval","repeatFinish","$window","bind","pageYOffset","scroll","filter","date","t","split","d","actiondate","month","getMonth","getFullYear","getDate","doc","win","docEl","documentElement","resizeEvt","recalc","clientWidth","minSize","maxSize","minWidth","maxWidth","scale","fontSize","style","addEventListener","document","FastClick","attach","body","animate","position","scrollTop","bottom","factory","service","cookieName","cookieStart","cookie","indexOf","cookieValue","cookieEnd","decodeURIComponent","substring","$q","$http","deferred","defer","promise","method","res","resolve","reject"],"mappings":"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","file":"build.js","sourcesContent":["angular.module('myApp', ['ui.router', 'angular-md5', 'directives', 'services', 'filters', 'RecommendModule', 'TopicModule', 'MediaModule', 'AccountModule', 'ArticleModule'])\r\n    .run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\r\n        $rootScope.$state = $state;\r\n        $rootScope.$stateParams = $stateParams;\r\n\r\n        $rootScope.$on('$stateChangeSuccess', function(event, to, toParams, from, fromParams) {\r\n            $rootScope.$previousState = {\r\n                from: from,\r\n                fromParams: fromParams,\r\n                to: to,\r\n                toParams: toParams\r\n            };\r\n        });\r\n    }])\r\n    .config(['$httpProvider', function($httpProvider) {\r\n        //request payload, 转换成form data\r\n        $httpProvider.defaults.headers.post = {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n        };\r\n        $httpProvider.defaults.transformRequest = function(obj) {\r\n            var str = [];\r\n            for (var p in obj) str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\r\n            return str.join(\"&\");\r\n        };\r\n    }])\r\n    .config(['$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {\r\n        $urlRouterProvider.otherwise('/tab/recommend');\r\n\r\n        $stateProvider.state('tab', {\r\n                url: '/tab',\r\n                templateUrl: 'dist/tpl/tab.html',\r\n            })\r\n            .state('tab.recommend', {\r\n                url: '/recommend',\r\n                templateUrl: 'dist/tpl/recommend.html',\r\n                controller: 'RecommendCtrl'\r\n            })\r\n            .state('tab.topic', {\r\n                url: '/topic',\r\n                templateUrl: 'dist/tpl/topic.html',\r\n                controller: 'TopicCtrl'\r\n            })\r\n            .state('tab.media', {\r\n                url: '/media',\r\n                templateUrl: 'dist/tpl/media.html',\r\n                controller: 'MediaCtrl'\r\n            })\r\n            .state('tab.me', {\r\n                url: '/me',\r\n                templateUrl: 'dist/tpl/me.html'\r\n            })\r\n            .state('tab.me.account', {\r\n                url: '/account',\r\n                templateUrl: 'dist/tpl/account.html',\r\n                controller: 'AccountCtrl'\r\n            })\r\n            .state('tab.me.login', {\r\n                url: '/login',\r\n                templateUrl: 'dist/tpl/login.html',\r\n                controller: 'LoginCtrl'\r\n            })\r\n            .state('tab.me.register', {\r\n                url: '/register',\r\n                templateUrl: 'dist/tpl/register.html',\r\n                controller: 'RegisterCtrl'\r\n            })\r\n            .state('topicDetail', {\r\n                url: '/topic/:topicId',\r\n                templateUrl: 'dist/tpl/topicDetail.html',\r\n                controller: 'TopicDetailCtrl'\r\n            })\r\n            .state('mediaDetail', {\r\n                url: '/media/:mediaId',\r\n                templateUrl: 'dist/tpl/mediaDetail.html',\r\n                controller: 'MediaDetailCtrl'\r\n            })\r\n            .state('article', {\r\n                url: '/article/:articleId',\r\n                templateUrl: 'dist/tpl/article.html',\r\n                controller: 'ArticleCtrl'\r\n            })\r\n    }])\r\n    .controller('AppCtrl', ['$scope', function($scope) {\r\n\r\n        var hour = (new Date()).getHours();\r\n        $scope.mode = {};\r\n        if (hour > 7 && hour < 23) {\r\n            $scope.mode.day = true;\r\n            $scope.mode.name = \"日间\";\r\n        } else {\r\n            $scope.mode.day = false;\r\n            $scope.mode.name = \"夜间\";\r\n        }\r\n\r\n        $scope.loadingPage = {\r\n            'showLoading': false\r\n        };\r\n    }])","angular.module(\"RecommendModule\", [])\r\n    .controller('RecommendCtrl', ['$scope', 'httpService', function($scope, httpService) {\r\n        $scope.loadingPage.showLoading = true;\r\n\r\n        $scope.hasGetData = false;\r\n        var page = 1;\r\n        $scope.getList = function() {\r\n            if (page == 0) {\r\n                return false;\r\n            }\r\n            httpService.getData('/article/get_recommend', {\r\n                    page: page\r\n                })\r\n                .then(function(data) {\r\n                    $scope.hasGetData = true;\r\n                    if (page == 1) {\r\n                        $scope.bannerList = data.banner;\r\n                        $scope.recommendList = data.recommend;\r\n                        $scope.loadingPage.showLoading = false;\r\n                        page++;\r\n                    } else {\r\n                        for (var i = 0; i < data.recommend.length; i++) {\r\n                            console.log(data.recommend);\r\n                            $scope.recommendList.push(data.recommend[i]);\r\n                        }\r\n                        // $scope.recommendList = $scope.recommendList.concat(data.recommend);\r\n                        if ($scope.recommendList.length >= data.recommendCount) {\r\n                            page = 0;\r\n                            console.log(page);\r\n                        }\r\n                    }\r\n                });\r\n        };\r\n        $scope.getList();\r\n        // var page = 1;\r\n        // httpService.getData('/article/get_recommend', {\r\n        //         page: page\r\n        //     })\r\n        //     .then(function(data) {\r\n        //         $scope.bannerList = data.banner;\r\n        //         $scope.recommendList = data.recommend;\r\n        //         $scope.loadingPage.showLoading = false;\r\n        //     });\r\n        $scope.slideIndex = 0;\r\n        $scope.renderFinish = function() {\r\n            setTimeout(function() {\r\n                new Swipe($(\".recommend #slide\")[0], {\r\n                    startSlide: 0,\r\n                    speed: 400,\r\n                    auto: 3000,\r\n                    continuous: true,\r\n                    disableScroll: false,\r\n                    stopPropagation: false,\r\n                    callback: function(index, elem) {\r\n                        $scope.slideIndex = index > 2 ? index % 3 : index;\r\n                        $scope.$digest();\r\n                    },\r\n                    transitionEnd: function(index, elem) {\r\n\r\n                    }\r\n                });\r\n            }, 0);\r\n        }\r\n    }]);\r\n\r\nangular.module(\"TopicModule\", [\"ngSanitize\"])\r\n    .controller('TopicCtrl', ['$scope', 'httpService', function($scope, httpService) {\r\n\r\n        $scope.loadingPage.showLoading = true;\r\n        httpService.getData('/topic/get_topic')\r\n            .then(function(data) {\r\n                $scope.topicList = data;\r\n                $scope.loadingPage.showLoading = false;\r\n            });\r\n        $scope.myKeyup = function(e) {\r\n            if (e.keyCode == 13) {\r\n                $scope.search($scope.searchText);\r\n            }\r\n        };\r\n        var lastClick = 0;\r\n        $scope.search = function(searchText) {\r\n            if (lastClick) {\r\n                console.log(lastClick);\r\n                var gap = +(new Date()) - lastClick;\r\n                console.log(gap);\r\n                if (gap < 1000) {\r\n                    return false;\r\n                }\r\n                lastClick = +(new Date());\r\n            }\r\n            httpService.getData('/article/search', {\r\n                    query: searchText\r\n                })\r\n                .then(function(data) {\r\n                    $scope.searchResult = data;\r\n                    $scope.showResult = true;\r\n                    $(\".search > input\").blur();\r\n                });\r\n            lastClick = +(new Date());\r\n\r\n        }\r\n        $scope.hideResult = function() {\r\n            $scope.showResult = false;\r\n            $scope.searchText = \"\";\r\n        }\r\n    }])\r\n    .controller('TopicDetailCtrl', ['$scope', '$state', 'httpService', function($scope, $state, httpService) {\r\n        $scope.loadingPage.showLoading = true;\r\n        httpService.getData('/topic/get_one_topic', {\r\n                id: $state.params.topicId\r\n            })\r\n            .then(function(data) {\r\n                $scope.topicInfo = data;\r\n                $scope.loadingPage.showLoading = false;\r\n            });\r\n        $scope.setEllipsis = function() {\r\n            setTimeout(function() {\r\n                $(\".topic-article .summary\").each(function(i) {\r\n                    var divH = $(this).height();\r\n                    var $p = $(\"p\", $(this)).eq(0);\r\n                    while ($p.outerHeight() > divH) {\r\n                        $p.text($p.text().replace(/(\\s)*([a-zA-Z0-9]+|\\W)(\\.\\.\\.)?$/, \"...\"));\r\n                    };\r\n                });\r\n            })\r\n        };\r\n\r\n    }]);\r\n\r\nangular.module(\"MediaModule\", [])\r\n    .controller('MediaCtrl', ['$scope', 'httpService', function($scope, httpService) {\r\n        $scope.loadingPage.showLoading = true;\r\n        httpService.getData('/media/get_media')\r\n            .then(function(data) {\r\n                $scope.mediaList = data;\r\n                $scope.loadingPage.showLoading = false;\r\n            });\r\n        $scope.setEllipsis = function() {\r\n            setTimeout(function() {\r\n                $(\".media .intro\").each(function(i) {\r\n                    var divH = $(this).height();\r\n                    var $p = $(\"p\", $(this)).eq(0);\r\n                    while ($p.outerHeight() > divH) {\r\n                        $p.text($p.text().replace(/(\\s)*([a-zA-Z0-9]+|\\W)(\\.\\.\\.)?$/, \"...\"));\r\n                    };\r\n                });\r\n            })\r\n        };\r\n\r\n    }])\r\n    .controller('MediaDetailCtrl', ['$scope', '$state', 'httpService', function($scope, $state, httpService) {\r\n        $scope.isfocus = false;\r\n        $scope.loadingPage.showLoading = true;\r\n        httpService.getData('/media/get_one_media', {\r\n                id: $state.params.mediaId\r\n            })\r\n            .then(function(data) {\r\n                $scope.mediaInfo = data;\r\n                $scope.isfocus = !!$scope.mediaInfo['is_focus'];\r\n                $scope.loadingPage.showLoading = false;\r\n            });\r\n        $scope.focus = function() {\r\n            var action;\r\n            if ($scope.isfocus) {\r\n                action = 0;\r\n            } else {\r\n                action = 1;\r\n            }\r\n            httpService.postData('/user/focus_media', {\r\n                    media_id: $state.params.mediaId,\r\n                    action: action\r\n                })\r\n                .then(function(data) {\r\n                    if (!data.status) {\r\n                        alert(data.message);\r\n                    } else {\r\n                        if (action) {\r\n                            alert(\"已成功关注！\");\r\n                            $scope.isfocus = true;\r\n                        } else {\r\n                            alert(\"已取消关注！\");\r\n                            $scope.isfocus = false;\r\n                        }\r\n                    }\r\n                });\r\n\r\n        }\r\n    }]);\r\n\r\nangular.module(\"AccountModule\", [])\r\n    .controller('AccountCtrl', ['$scope', '$state', 'cookieService', 'httpService', function($scope, $state, cookieService, httpService) {\r\n        console.log(cookieService.get(\"zw_username\"));\r\n        if (!cookieService.get(\"zw_username\")) {\r\n            console.log(\"go\");\r\n            $state.go(\"tab.me.login\");\r\n            $scope.loadingPage.showLoading = false;\r\n            return false;\r\n        }\r\n\r\n        $scope.loadingPage.showLoading = true;\r\n        httpService.getData('/user/get_detail')\r\n            .then(function(data) {\r\n                $scope.userInfo = data;\r\n                $(\".attention-list\").css(\"width\", (9.78 * $scope.userInfo.medias.length) + \"rem\");\r\n                $scope.loadingPage.showLoading = false;\r\n            });\r\n        $scope.switchMode = function() {\r\n            $scope.mode.day = !$scope.mode.day;\r\n            if ($scope.mode.day) {\r\n                $scope.mode.name = \"日间\";\r\n            } else {\r\n                $scope.mode.name = \"夜间\";\r\n            }\r\n        }\r\n\r\n        $scope.exit = function() {\r\n            cookieService.exit();\r\n            $state.go(\"tab.me.login\");\r\n        }\r\n\r\n        $scope.feedback = function() {\r\n            $scope.showFeed = true;\r\n        }\r\n\r\n        $scope.sendFeed = function() {\r\n            alert(\"感谢您的反馈！我们会努力做的更好！\")\r\n            $scope.showFeed = false;\r\n        };\r\n\r\n        // $scope.initScroll = function() {\r\n        //     console.log(2);\r\n        //     setTimeout(function() {\r\n        //         var myScroll = new IScroll('.scroll', {\r\n        //             scrollX: true,\r\n        //             scrollY: false,\r\n        //             mouseWheel: true\r\n        //         });\r\n        //     }, 5000);\r\n        // }\r\n\r\n    }])\r\n    .controller('LoginCtrl', ['$scope', '$state', 'md5', 'httpService', function($scope, $state, md5, httpService) {\r\n        $scope.username = \"\";\r\n        $scope.password = \"\";\r\n        $scope.login = function() {\r\n            if ($scope.username == \"\" || $scope.password == \"\") {\r\n                alert(\"请填写用户名或密码！\");\r\n                return false;\r\n            }\r\n            httpService.postData('/user/login', {\r\n                    username: $scope.username,\r\n                    password: md5.createHash($scope.password)\r\n                })\r\n                .then(function(data) {\r\n                    if (data.status) {\r\n                        $state.go(\"tab.me.account\");\r\n                    } else {\r\n                        alert(data.message);\r\n                    }\r\n                });\r\n        };\r\n    }])\r\n    .controller('RegisterCtrl', ['$scope', '$state', 'md5', 'httpService', function($scope, $state, md5, httpService) {\r\n        $scope.username = \"\";\r\n        $scope.password = \"\";\r\n        $scope.register = function() {\r\n            if ($scope.username == \"\" || $scope.password == \"\") {\r\n                alert(\"请填写用户名或密码！\");\r\n                return false;\r\n            }\r\n            if (!/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/.test($scope.username)) {\r\n                alert(\"请填写正确的邮箱格式！\");\r\n                return false;\r\n            }\r\n            httpService.postData('/user/register', {\r\n                    username: $scope.username,\r\n                    password: md5.createHash($scope.password)\r\n                })\r\n                .then(function(data) {\r\n                    if (data.status) {\r\n                        alert(\"注册成功\");\r\n                        $state.go(\"tab.me.account\");\r\n                    } else {\r\n                        alert(data.message);\r\n                    }\r\n                });\r\n        };\r\n    }]);\r\n\r\nangular.module(\"ArticleModule\", [\"ngSanitize\"])\r\n    .controller('ArticleCtrl', ['$scope', '$state', '$sce', 'cookieService', 'httpService', function($scope, $state, $sce, cookieService, httpService) {\r\n\r\n        $scope.hasCollect = false;\r\n        $scope.loadingPage.showLoading = true;\r\n        httpService.getData('/article/get_one_article', {\r\n                id: $state.params.articleId\r\n            })\r\n            .then(function(data) {\r\n                data.article_content = $sce.trustAsHtml(data.article_content);\r\n                $scope.article = data;\r\n                $scope.hasCollect = !!$scope.article['is_focus'];\r\n                $scope.loadingPage.showLoading = false;\r\n            });\r\n\r\n        $scope.collect = function() {\r\n            if (!cookieService.get('zw_username')) {\r\n                alert(\"收藏文章请先登录！\");\r\n                return false;\r\n            }\r\n            $scope.hasCollect = !$scope.hasCollect;\r\n            var action;\r\n            if ($scope.hasCollect) {\r\n                action = 1;\r\n            } else {\r\n                action = 0;\r\n            }\r\n\r\n            httpService.postData('/user/collect_article', {\r\n                article_id: $state.params.articleId,\r\n                action: action\r\n            });\r\n        };\r\n\r\n    }]);","angular.module('directives', [])\r\n\r\n.directive('historyBack', ['$rootScope', '$state', function($rootScope, $state) {\r\n    return {\r\n        restrict: 'E',\r\n        template: '<div class=\"history-back\"><i class=\"icon-back\"></i></div>',\r\n        replace: true,\r\n        link: function(scope, element, attr) {\r\n            element.on('click', function() {\r\n                var previous = $rootScope.$previousState;\r\n                console.log($rootScope.$previousState);\r\n                if (!!previous.from.name) {\r\n                    // $state.go(previous.from.name, previous.fromParams);\r\n                    window.history.back();\r\n                } else {\r\n                    $state.go(\"tab.recommend\");\r\n                }\r\n            })\r\n        }\r\n    }\r\n}])\r\n\r\n.directive('repeatFinish', function() {\r\n    return {\r\n        link: function(scope, element, attr) {\r\n            console.log(\"hello\");\r\n            if (scope.$last == true) {\r\n                scope.$eval(attr.repeatFinish)\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\n.directive('scroll', ['$window', function($window) {\r\n\r\n    return function(scope, element, attr) {\r\n        angular.element($window).bind(\"scroll\", function() {\r\n            // console.log($(element)[0].clientHeight);\r\n            // console.log($(\".container\").height(), '------');\r\n            // console.log($(element).height(), 'element------');\r\n            if ($(this).height() + this.pageYOffset > $(\".container\").height() - 250) {\r\n                console.log(scope.hasGetData);\r\n                if (scope.hasGetData) {\r\n                    scope.$eval(attr.scroll);\r\n                    scope.hasGetData = false;\r\n                }\r\n            }\r\n        });\r\n    };\r\n}])","angular.module('filters', [])\r\n\r\n.filter('dateObj', function() {\r\n    return function(date) {\r\n        if (!date) {\r\n            return;\r\n        }\r\n        // console.log(date);\r\n        // var date = new Date(date);\r\n        var t = date.split(/[- :]/);\r\n        // console.log(t);\r\n        // Apply each element to the Date function\r\n        var d = new Date(t[0], t[1] - 1, t[2], t[3], t[4], t[5]);\r\n        // console.log(d);\r\n        var actiondate = new Date(d);\r\n        return actiondate;\r\n    }\r\n})\r\n\r\n.filter('month', function() {\r\n    return function(date) {\r\n        if (!date) {\r\n            return;\r\n        }\r\n        var month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\r\n        return month[date.getMonth()] + ', ' + date.getFullYear();\r\n    }\r\n})\r\n\r\n.filter('day', function() {\r\n    return function(date) {\r\n        if (!date) {\r\n            return;\r\n        }\r\n        var month = ['January', 'February', 'March', 'April', 'May', 'June',\r\n            'July', 'Aguest', 'September', 'October', 'November', 'December'\r\n        ];\r\n        var day = date.getDate();\r\n        if (day < 10) {\r\n            day = '0' + day;\r\n        }\r\n        return month[date.getMonth()] + ', ' + day + ', ' + date.getFullYear();;\r\n    }\r\n})","(function(doc, win) {\r\n    var docEl = doc.documentElement,\r\n        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',\r\n        recalc = function() {\r\n            var clientWidth = docEl.clientWidth;\r\n            if (!clientWidth) {\r\n                return;\r\n            }\r\n            var minSize = 12;\r\n            var maxSize = 16;\r\n            var minWidth = 320;\r\n            var maxWidth = 768;\r\n            var scale = (clientWidth - minWidth) / (maxWidth - minWidth);\r\n            var fontSize = scale * (maxSize - minSize) + minSize;\r\n\r\n            if (fontSize > maxSize) {\r\n                fontSize = maxSize;\r\n            } else if (fontSize < minSize) {\r\n                fontSize = minSize;\r\n            }\r\n            docEl.style.fontSize = fontSize + 'px';\r\n        };\r\n\r\n    if (!doc.addEventListener) return;\r\n    win.addEventListener(resizeEvt, recalc, false);\r\n    doc.addEventListener('DOMContentLoaded', recalc, false);\r\n})(document, window);\r\n\r\n$(function() {\r\n    FastClick.attach(document.body);\r\n\r\n    var animate = false;\r\n    var position = $(window).scrollTop();\r\n    $(window).scroll(function() {\r\n        var scroll = $(window).scrollTop();\r\n        if (scroll > position && !animate && $(\"#myTab\").length) {\r\n            animate = true;\r\n            $(\"#myTab\").animate({\r\n                \"bottom\": \"-4.4rem\",\r\n            }, 300, function() {\r\n                animate = false;\r\n            });\r\n        } else if (scroll < position && !animate && $(\"#myTab\").length) {\r\n            animate = true;\r\n            $(\"#myTab\").animate({\r\n                \"bottom\": \"0\",\r\n            }, 300, function() {\r\n                animate = false;\r\n            });\r\n        }\r\n        position = scroll;\r\n    });\r\n});","angular.module('services', [])\r\n\r\n.factory('cookieService', function() {\r\n        var service = {\r\n            get: function(name) {\r\n                var cookieName = encodeURIComponent(name) + \"=\";\r\n                var cookieStart = document.cookie.indexOf(cookieName);\r\n                var cookieValue = \"\";\r\n\r\n                if (cookieStart > -1) {\r\n                    var cookieEnd = document.cookie.indexOf(\";\", cookieStart);\r\n                    if (cookieEnd == -1) {\r\n                        cookieEnd = document.cookie.length;\r\n                    }\r\n                    cookieValue = decodeURIComponent(document.cookie.substring(cookieStart + cookieName.length, cookieEnd));\r\n                }\r\n                return cookieValue;\r\n            },\r\n            exit: function() {\r\n                document.cookie = 'zw_username=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;';\r\n            }\r\n        };\r\n        return service;\r\n    })\r\n    .service('httpService', ['$q', '$http', function($q, $http) {\r\n        this.getData = function(url, params) {\r\n            var deferred = $q.defer();\r\n            var promise = deferred.promise;\r\n\r\n            $http({\r\n                method: 'GET',\r\n                url: '/zuiwan-backend/index.php' + url,\r\n                params: params\r\n            }).then(function successCallback(res) {\r\n                // console.log(res.data);\r\n                deferred.resolve(res.data);\r\n            }, function errorCallback(res) {\r\n                console.log(res.data);\r\n                deferred.reject(res.data);\r\n            });\r\n            return promise;\r\n        };\r\n        this.postData = function(url, data) {\r\n            var deferred = $q.defer();\r\n            var promise = deferred.promise;\r\n\r\n            $http({\r\n                method: 'POST',\r\n                url: '/zuiwan-backend/index.php' + url,\r\n                data: data\r\n            }).then(function successCallback(res) {\r\n                // console.log(res.data);\r\n                deferred.resolve(res.data);\r\n            }, function errorCallback(res) {\r\n                console.log(res.data);\r\n                deferred.reject(res.data);\r\n            });\r\n            return promise;\r\n        }\r\n    }]);"],"sourceRoot":"/source/"}