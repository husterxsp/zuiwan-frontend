angular.module("myApp",["ui.router","angular-md5","directives","services","RecommendModule","TopicModule","MediaModule","AccountModule","ArticleModule"]).run(["$rootScope","$state","$stateParams",function(t,e,l){t.$state=e,t.$stateParams=l}]).config(["$httpProvider",function(t){t.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"},t.defaults.transformRequest=function(t){var e=[];for(var l in t)e.push(encodeURIComponent(l)+"="+encodeURIComponent(t[l]));return e.join("&")}}]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/tab/recommend"),t.state("tab",{url:"/tab",templateUrl:"dist/tpl/tab.html"}).state("tab.recommend",{url:"/recommend",templateUrl:"dist/tpl/recommend.html",controller:"RecommendCtrl"}).state("tab.topic",{url:"/topic",templateUrl:"dist/tpl/topic.html",controller:"TopicCtrl"}).state("tab.media",{url:"/media",templateUrl:"dist/tpl/media.html",controller:"MediaCtrl"}).state("tab.account",{url:"/account",templateUrl:"dist/tpl/account.html",controller:"AccountCtrl"}).state("topicDetail",{url:"/topic/:topicId",templateUrl:"dist/tpl/topicDetail.html",controller:"TopicDetailCtrl"}).state("mediaDetail",{url:"/media/:mediaId",templateUrl:"dist/tpl/mediaDetail.html",controller:"MediaDetailCtrl"}).state("tab.login",{url:"/login",templateUrl:"dist/tpl/login.html",controller:"LoginCtrl"}).state("tab.register",{url:"/register",templateUrl:"dist/tpl/register.html",controller:"RegisterCtrl"}).state("article",{url:"/article/:articleId",templateUrl:"dist/tpl/article.html",controller:"ArticleCtrl"})}]).controller("AppCtrl",["$scope",function(t){var e=(new Date).getHours();t.mode={},e>7&&23>e?t.mode.day=!0:t.mode.day=!1}]);
angular.module("RecommendModule",[]).controller("RecommendCtrl",["$scope","$http",function(e,o){o({method:"GET",url:"/zuiwan-backend/index.php/article/get_recommend"}).then(function(o){function t(e){$("#slide > ul").css("left","-"+100*e+"%"),$("#slide .dot span").eq(e).addClass("active").siblings().removeClass("active")}console.log(o),e.bannerList=o.data.banner,e.recommendList=o.data.recommend;var n=0;setInterval(function(){t(n),n++,3==n&&(n=0)},3e3)},function(e){console.log(e)})}]),angular.module("TopicModule",[]).controller("TopicCtrl",["$scope","$http",function(e,o){o({method:"GET",url:"/zuiwan-backend/index.php/topic/get_topic"}).then(function(o){console.log(o),e.topicList=o.data},function(e){console.log(e)})}]).controller("TopicDetailCtrl",["$scope","$http","$state",function(e,o,t){o({method:"GET",url:"/zuiwan-backend/index.php/topic/get_one_topic",params:{id:t.params.topicId}}).then(function(o){console.log(o),e.topicInfo=o.data},function(e){console.log(e)})}]),angular.module("MediaModule",[]).controller("MediaCtrl",["$scope","$http",function(e,o){o({method:"GET",url:"/zuiwan-backend/index.php/media/get_media"}).then(function(o){console.log(o.data),e.mediaList=o.data},function(e){console.log(e)})}]).controller("MediaDetailCtrl",["$scope","$http","$state",function(e,o,t){e.isfocus=!1,o({method:"GET",url:"/zuiwan-backend/index.php/media/get_one_media",params:{id:t.params.mediaId}}).then(function(o){console.log(o),e.mediaInfo=o.data,e.isfocus=!!e.mediaInfo.is_focus},function(e){console.log(e)}),e.focus=function(){e.isfocus=!e.isfocus;var n;n=e.isfocus?1:0,o({method:"POST",url:"/zuiwan-backend/index.php/user/focus_media",data:{media_id:t.params.mediaId,action:n}}).then(function(e){console.log(e.data)},function(e){})}}]),angular.module("AccountModule",[]).controller("AccountCtrl",["$scope","$http","$state","cookieService",function(e,o,t,n){return n.get("zw_username")?(e.switchMode=function(){e.mode.day=!e.mode.day},e.exit=function(){n.exit(),t.go("tab.login")},void o({method:"GET",url:"/zuiwan-backend/index.php/user/get_detail"}).then(function(o){console.log(o),e.userInfo=o.data,$(".attention-list").css("width",9.78*e.userInfo.medias.length+"rem");new IScroll(".scroll",{scrollX:!0,scrollY:!1,mouseWheel:!0})},function(e){console.log(e)})):(t.go("tab.login"),!1)}]).controller("LoginCtrl",["$scope","$http","$state","md5",function(e,o,t,n){e.login=function(){o({method:"POST",url:"/zuiwan-backend/index.php/user/login",data:{username:e.username,password:n.createHash(e.password)}}).then(function(e){console.log(e.data),e.data.status?t.go("tab.account"):alert(e.data.message)},function(e){console.log(e)})}}]).controller("RegisterCtrl",["$scope","$http","$state","md5",function(e,o,t,n){e.register=function(){o({method:"POST",url:"/zuiwan-backend/index.php/user/register",data:{username:e.username,password:n.createHash(e.password)}}).then(function(e){console.log(e.data),e.data.status?(alert("注册成功"),t.go("tab.login")):alert(e.data.message)},function(e){alert("请求失败")})}}]),angular.module("ArticleModule",["ngSanitize"]).controller("ArticleCtrl",["$scope","$http","$state","cookieService",function(e,o,t,n){e.hasCollect=!1,o({method:"GET",url:"/zuiwan-backend/index.php/article/get_one_article",params:{id:t.params.articleId}}).then(function(o){console.log(o),e.article=o.data,e.hasCollect=!!e.article.is_focus},function(e){}),e.collect=function(){if(!n.get("zw_username"))return alert("收藏文章请先登录！"),!1;e.hasCollect=!e.hasCollect;var a;a=e.hasCollect?1:0,o({method:"POST",url:"/zuiwan-backend/index.php/user/collect_article",data:{article_id:t.params.articleId,action:a}}).then(function(e){console.log(e)},function(e){})}}]);
angular.module("directives",[]).directive("historyBack",function(){return{restrict:"E",template:'<div class="history-back"><i class="icon-left-open-big"></i></div>',replace:!0,link:function(i,c,t){c.on("click",function(){window.history.back()})}}});
!function(n,t){var e=n.documentElement,i="orientationchange"in window?"orientationchange":"resize",o=function(){var n=e.clientWidth;if(n){var t=12,i=16,o=320,d=768,a=(n-o)/(d-o),c=a*(i-t)+t;c>i?c=i:t>c&&(c=t),e.style.fontSize=c+"px"}};n.addEventListener&&(t.addEventListener(i,o,!1),n.addEventListener("DOMContentLoaded",o,!1))}(document,window),$(function(){FastClick.attach(document.body)});
angular.module("services",[]).factory("cookieService",function(){return{get:function(e){var o=encodeURIComponent(e)+"=",n=document.cookie.indexOf(o),c="";if(n>-1){var t=document.cookie.indexOf(";",n);-1==t&&(t=document.cookie.length),c=decodeURIComponent(document.cookie.substring(n+o.length,t))}return c},exit:function(){document.cookie="zw_username=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;"}}});
//# sourceMappingURL=build.js.map
